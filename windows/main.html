<script>
 
  const template = require("../js/template.js");
  const electron = require("electron");

  if (!localStorage.getItem("token")) {
    window.location = "../windows/login.html";
  }

  var title = `Welcome to Encilica`;
  var head = `<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i">`;
  var body = ``;

  template.createPage(title, head, body);
</script>
    <link rel="stylesheet" href="../assets/configurable/custom.css">
<div class="sidenav">
  <p class="usernametextblock" id="usernametext"></p>
  <p style="color: white;" id="enclica">Encilica</p>
 
  <a class="activation" id="chatoblock" onclick='sectiondiv(event, "chats","#ec6ead","#3494e6")' >chats</a>
  <a class="activation" id="currentcall_btn" style="display: block;" onclick='sectiondiv(event, "currentcall","#ec6ead","#3494e6")' >Current Call</a>
  <a class="activation" onclick='sectiondiv(event, "settings","#00a2ff","#ab34e6")' >settings</a>
  <p id="serverlist">Server List</p>
  <div id="chatsnav">

  </div>
  <p class="normaltext" id="madeby">Made by csoftware.</p>
  <div id="lighter"></div>
  <img id="pfp"></img>
  <p id="name"></p>
</div>

<!-- Modal for spam prevention -->
<div id="spam" class="modal">


  <div class="modal-content">
    <div class="modal-header bg-primary">
      <span class="close"><a onClick="dismissspam();">&times;</a></span>
      <h2>YOU'RE SPAMMING</h2>
    </div>
    <div class="modal-body">
  
        <p>Please dont spam servers.</p>
  
    </div>
  </div>
  </div>

<div class="main" id="chats" >
  <h2>Chats</h2>
  <input style="width: 200px;" type="text" required id="serverjoininputbox" placeholder="server invite code" />
  <button class="btn btn-success" style="width: 200px;" id="joinserverbutton" onclick="joinserver();" height="90px" width="90px">Join server</button>
    <button id="create_btn" style="width: 200px;" class="btn btn-info">Create server</button>
<div class="loading" id="preloader"></div>
<!-- The Modal -->
<div id="create" class="modal">

  <!-- Modal content -->
  <div class="modal-content" style="height: 100%;">
    <div class="modal-header bg-primary">
      <span class="close" onclick="document.getElementById('create').style.display = 'none';">&times;</span>
      <h2>Create Encilica server</h2>
    </div>
    <div class="modal-body">

        <input id="name_creation" type="text" placeholder="Server Name" />
        <button class="btn btn-info" onclick="createserver();">Create</button>
        <p>Build your own community server quick and easy.</p>

    </div>
  </div>

</div>
<!--
<h2>CALLING MEMBERS</h2>

<p>Your RTC ID: <span id="myrtcid"></span></p>
<input id="rrtcid" style="width:100px;" type="text" placeholder="Recipient RTC ID" />
<button class="btn btn-info" onclick="makecall();" style="width: 200px; height: 50px;">Call</button>

-->
</div>
<!-- community servers-->


</div>

<div class="main" id="settings">
  <h2>Settings</h2>


  <textarea disabled id="bio"></textarea>
  <button class="btn btn-success" id="rbtn" onclick="refreshprofile();">Refresh<img src="../assets/images/sysload.gif"
      id="l1-968b" style="display:none;" width="20px" /></button>


  <p>Custom CSS</p>
  <textarea id="customcss"></textarea>


  <button onclick="savecss();" id="cbtn" class="btn btn-primary">apply custom css to file<img src="../assets/images/sysload.gif"
      id="l1-968c" style="display:none;" width="20px" /></button>




  <p>Client settings:</p>

  <button class="btn btn-danger" onclick="logout();">Logout</button>
  <button onclick="listgroups();" class="btn">Refresh server list</button>

  <a id="uitest" style="display: none;" class="btn btn-success" href="../windows/uitest.html">UITEST</a>
  <p>connection Info</p>
  <p>API host: <span id="host"></span></p>

<button onclick="document.getElementById('about').style.display = 'block';" class="btn btn-success">Developers and contributers.</button>


<!-- The Modal -->
<div id="about" class="modal">

  <!-- Modal content -->
  <div class="modal-content" style="height: 100%;">
    <div class="modal-header bg-primary">
      <span class="close" onclick="document.getElementById('about').style.display = 'none';">&times;</span>
      <h2>About Enclica development</h2>
    </div>
    <div class="modal-body">
      <p>Project manager and lead developer: Kessan Robertson.</p><br/>
      <p>Contributer: vistax64 KonradCzerw</p><br/>
      <p>Contributer: furry dumbass</p><br/>
      <p>Contributer: Gamerappa</p><br/>
      <p>Tester: Wilber</p><br/>
      <!-- insert your name here  <p>role: name</p><br/> -->
    </div>
  </div>

</div>

</div>
<div class="main" id="games">
  <h2>your games</h2>
<a onclick="sendfr();">Add a game to lib</a>
</div>

<!--

RTC CURRENTCALL SCREEN


-->

<div class="main" id="currentcall">
  <h2>your current call</h2>
  <span>you</span>
  <video muted id="video" width="400px" height="255px" poster="../assets/images/calling window.png"></video>
  <span>them</span>
  <video id="videorec" width="400px" height="255px" poster="../assets/images/calling window.png"></video>
  <p>
    <button class="btn btn-danger" style="width: 300px" onclick="endcall();">End call</button>
    <button class="btn btn-info" style="width: 300px">Mute</button>
    <button class="btn btn-info" style="width: 300px">Hide video</button>
    <button class="btn btn-danger" onclick="reportcall();" style="width: 300px">report</button>
    <p>CALL STATUS: <span id="callstatus">Connecting...</span></p>
    <p>OUTGOING STATUS: <span id="#outgoing">Connecting...</span></p>
    
  </p>
</div>


<div id="chatsitem">


</div>





<!-- Trigger/Open The Modal -->


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>About Enclica(CPM)</p>
  </div>

</div>
<script src="../js/Core.js"></script>
<script src="../js/start.js"></script>
<script src="../js/filecontrol.js"></script>
<script src="../js/clientcontrol.js"></script>
<script src="../js/modal.js"></script>
<script src="../js/messagecontrol.js"></script>
<script src="../js/RTC.js"></script>
<script src="../js/servercontrol.js"></script>
