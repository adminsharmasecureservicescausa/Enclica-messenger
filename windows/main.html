<script>
 
  const template = require("../js/template.js");
  const electron = require("electron");

  if (!localStorage.getItem("token")) {
    window.location = "../windows/login.html";
  }

  var title = `Enclica messenger.`;
  var head = `<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,600,600i">`;
  var body = ``;

  template.createPage(title, head, body);
</script>


<script>
   
  </script>
</body>    
<div style="height:20px;"></div>
<div class="sidenav">
  <p class="usernametextblock" id="usernametext"></p>
  <p  id="enclica" class="name">enclica</p>
  <a class="activation" id="chatoblock" onclick='sectiondiv(event, "chats","#ec6ead","#3494e6")' >chats</a>
  <a class="activation" id="currentcall_btn" style="display: block;" onclick='sectiondiv(event, "currentcall","#ec6ead","#3494e6")' >Current Call</a>
 
 <!-- <a class="activation" onclick='sectiondiv(event, "games","#00a2ff","#ab34e6")' >Library</a> -->
  <a class="activation" id="cup" onclick='sectiondiv(event, "currentlyplaying","#00a2ff","#ab34e6")' >Currently playing</a>
  <a class="activation pulsate" onclick='update()' style="color: rgb(0, 117, 6); display: none;">UPDATE enclica</a>
  <p id="serverlist">Server List</p>
  <div id="chatsnav">

  </div>

  <div id="lighter"><a class="activation settings" onclick="sectiondiv(event, &quot;settings&quot;,&quot;#00a2ff&quot;,&quot;#ab34e6&quot;)"><svg id="i-settings" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="20" height="20" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M13 2 L13 6 11 7 8 4 4 8 7 11 6 13 2 13 2 19 6 19 7 21 4 24 8 28 11 25 13 26 13 30 19 30 19 26 21 25 24 28 28 24 25 21 26 19 30 19 30 13 26 13 25 11 28 8 24 4 21 7 19 6 19 2 Z"></path>
    <circle cx="16" cy="16" r="4"></circle>
</svg></a>  <img id="pfp"></img>
<p id="name"></p></div>

</div>
<link rel="stylesheet" href="../assets/configurable/custom.css">
<link rel="stylesheet" href="../assets/css/contextmenu.css">
<link rel="stylesheet" href="../assets/css/messagebubbles.css">
<script>
 document.getElementsByTagName('link')[0].disabled = true; 
    document.getElementsByTagName('link')[1].disabled = true; 
    document.getElementsByTagName('link')[2].disabled = true; 
    document.getElementsByTagName('link')[3].disabled = true; 
    document.getElementsByTagName('link')[4].disabled = true; 
    document.getElementsByTagName('link')[5].disabled = true; 
  </script>


<!-- Modal for spam prevention -->
<div id="spam" class="modal">


  <div class="modal-content">
    <div class="modal-header bg-primary">
      <span class="close"><a onClick="dismissspam();">&times;</a></span>
      <h2>YOU'RE SPAMMING</h2>
    </div>
    <div class="modal-body">
  
        <p>Please dont spam servers.</p>
  
    </div>
  </div>
  </div>

<div class="main" id="chats">
  <h2>Chats</h2>
  <input style="width: 200px;" type="text" required id="serverjoininputbox" placeholder="server invite code" /><p id="jerror" style="color: red; display: none;">failed to join server please try again.</p>
  <button class="btn btn-success" style="width: 200px;" id="joinserverbutton" onclick="joinserver();" height="90px" width="90px">Join server</button>
    <button id="create_btn" style="width: 200px;" class="btn btn-info">Create server</button>
<div class="loading" id="preloader"></div>
<!-- The Modal -->
<div id="create" class="modal">

  <!-- Modal content -->
  <div class="modal-content" style="height: 100%;">
    <div class="modal-header bg-primary">
      <span class="close" onclick="document.getElementById('create').style.display = 'none';">&times;</span>
      <h2>Create Encilica server</h2>
    </div>
    <div class="modal-body">

        <input id="name_creation" type="text" placeholder="Server Name" />
        <button class="btn btn-info" onclick="createserver();">Create</button>
        <p>Build your own community server quick and easy.</p>

    </div>
  </div>

</div>
<!--
calling members has been moved to call.html
-->

<h2>Communities.</h2>
<div id="com">

</div>



</div>



</div>

<div class="main" id="settings">
  <h2>Settings</h2>


  <textarea disabled id="bio"></textarea>
  <button class="btn btn-success" style="width: 200px;" id="rbtn" onclick="refreshprofile();">Refresh<img src="../assets/images/sysload.gif"
      id="l1-968b" style="display:none;" width="20px" /></button>

  <p>Client settings:</p>


  <button class="btn btn-danger" style="width: 200px;" onclick="logout();">Logout</button>
  <button onclick="listgroups();"  style="width: 200px;" class="btn">Refresh server list</button>

  <a id="uitest" style="display: none;" class="btn btn-success" href="../windows/uitest.html">UITEST</a>
  <p>connection Info</p>
  <p>API host: <span id="host"></span></p>

  <button onclick="document.getElementById('about').style.display = 'block';" class="btn btn-success">Developers and contributers.</button>
  
  <h3>Cache</h3>
  <p style="font-size: small;">NOTE: clearing your cache will cause Enclica to restart or things may not work correctly. Only clear if needed.</p>
  <button onclick="clearcache();" class="btn btn-warning">Clear cache</button>

  <p class="normaltext" id="madeby">Made by enclica software.</p>


<!-- The Modal -->
<div id="about" class="modal">

  <!-- Modal content -->
  <div class="modal-content" style="height: 100%;">
    <div class="modal-header bg-primary">
      <span class="close" onclick="document.getElementById('about').style.display = 'none';">&times;</span>
      <h2>About Enclica development</h2>
    </div>
    <div class="modal-body">
      <p>Project manager and lead developer: Kessan Robertson.</p><br/>
      <p>Contributer: vistax64 KonradCzerw</p><br/>
      <p>Contributer: furry</p><br/>
      <p>Contributer: Gamerappa</p><br/>
      <p>Tester: Wilber</p><br/>
      <p>Tester: Aruna the fluffy wolfie </p><br/>
      <!-- insert your name here  <p>role: name</p><br/> -->
    </div>
  </div>

</div>

</div>
<div class="main" id="games">
  <h2>your games</h2>
<a onclick="addgame();" style="width: 200px;">Add a game to lib</a>
</div>
<div class="main" id="currentlyplaying">
  <button class="btn btn-danger" onclick="apclose();">Stop and Close</button><br/>
  <h2>currently playing: <span id="cupl"></span></h2>

  <div id="ap">
  <audio controls style="width:100%" id="playing">
    Huh you using enclica or managed to port this to some obscure browser.
    </audio>
  </div>
    <div id="vp">
    <video controls style="width: 100%    !important;
    height: 500px   !important;" id="videoplayer">
      Huh you using enclica or managed to port this to some obscure browser.
    </video>
    </div>

</div>

<!--

RTC CURRENTCALL SCREEN


-->


<div id="chatsitem">


</div>





<!-- Trigger/Open The Modal -->


<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>About Enclica(CPM)</p>
  </div>

</div>
<script src="../js/Core.js"></script>
<script src="../js/start.js"></script>
<script src="../js/filecontrol.js"></script>
<script src="../js/clientcontrol.js"></script>
<script src="../js/modal.js"></script>
<script src="../js/contextmenu.js"></script>
<script src="../js/messagecontrol.js"></script>
<script src="../js/audio.js"></script>
<script src="../js/RTC.js"></script>
<script src="../js/servercontrol.js"></script>
<script>require('../renderer.js'); </script>